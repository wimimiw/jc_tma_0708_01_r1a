/*******************************Copyright (c)***********************************
 *
 *              Copyright (C), 1999-2011, Jointcom . Co., Ltd.
 *
 *------------------------------------------------------------------------------
 * @file	:rf_target.h
 * @author	:mashuai
 * @version	:v2.0 
 * @date	:2011.10.20
 * @brief	:
 *------------------------------------------------------------------------------
 * @attention
 ******************************************************************************/
#ifndef __TARGET_H__
#define __TARGET_H__
#endif	  

#ifndef __TARGET_C__
#define	__TARGET_EXT__ 	 extern
#else	  
#define	__TARGET_EXT__
#endif
/* Includes ------------------------------------------------------------------*/
/* Public typedef ------------------------------------------------------------*/
/* Public define -------------------------------------------------------------*/
#define I2C_EEPROM_ADDR     		0xA0
#define I2C_LM75_ADDR1      		0x90
#define I2C_LM75_ADDR2      		0x90

#define BYPASS						0
#define PATH1						1
#define PATH2						2

#define AD_SAMPLE_TIME				16
#define OUT_AD_MAX         			4096

#define COM_BAUDRATE				38400

#define ADC_CHANNEL_5V				5
#define ADC_CHANNEL_9V				4
#define ADC_CHANNEL_12V				1

#define ADC_CHANNEL_5V_1			6
#define ADC_CHANNEL_5V_2			8
#define ADC_CHANNEL_9V_1			7
#define ADC_CHANNEL_9V_2			9
 
//PC14,PC15
#define DIRMD1(x)					GPIO_WriteBit(GPIOC,GPIO_Pin_14,LOW == x ? Bit_RESET:Bit_SET)
#define DIRMD2(x)					GPIO_WriteBit(GPIOC,GPIO_Pin_15,LOW == x ? Bit_RESET:Bit_SET)

#define MAX9947_CONFIG(baud)		do{
										if ( baud == 9600 )
										{
											DIRMD1(LOW);
											DIRMD2(LOW);	
										}
										else if ( baud == 38400 )
										{
											DIRMD1(HIGH);
											DIRMD2(LOW);
										}
										else if ( baud == 115200 )
										{
											DIRMD1(LOW);
											DIRMD2(HIGH);	
										}
									}while(0)
                        		
//operater the gpio
#define RFPOWER_5V_1(x)				GPIO_WriteBit(GPIOB,GPIO_Pin_9 ,FALSE == x ? Bit_RESET:Bit_SET)
#define RFPOWER_5V_2(x)		    	GPIO_WriteBit(GPIOA,GPIO_Pin_11,FALSE == x ? Bit_RESET:Bit_SET)
#define RFPOWER_9V_1(x)				GPIO_WriteBit(GPIOB,GPIO_Pin_8 ,FALSE == x ? Bit_RESET:Bit_SET)
#define RFPOWER_9V_2(x)				GPIO_WriteBit(GPIOA,GPIO_Pin_15,FALSE == x ? Bit_RESET:Bit_SET)

//2SW1(PB4)
//2SW2(PB3)
#define RFSWITCH_PATH1_1(x)		    do{																	  \
										GPIO_WriteBit(GPIOB,GPIO_Pin_3 ,1 == x ? Bit_RESET:Bit_SET);      \
										GPIO_WriteBit(GPIOB,GPIO_Pin_4 ,1 != x ? Bit_RESET:Bit_SET);      \
									}while(0)															  \
//3SW1(PA10)
//3SW2(PA9)
#define RFSWITCH_PATH1_2(x)		    do{																	  \
										GPIO_WriteBit(GPIOA,GPIO_Pin_10,1 == x ? Bit_RESET:Bit_SET);      \
										GPIO_WriteBit(GPIOA,GPIO_Pin_9 ,1 != x ? Bit_RESET:Bit_SET);      \
									}while(0)															  \
//4SW1(PA12)
//4SW2(PC13)
#define RFSWITCH_PATH2(x)		    do{																	  \
										GPIO_WriteBit(GPIOA,GPIO_Pin_12,1 == x ? Bit_RESET:Bit_SET);      \
										GPIO_WriteBit(GPIOC,GPIO_Pin_13,1 != x ? Bit_RESET:Bit_SET);  	  \
									}while(0)															  \
//1SW1(PB5)
//5SW1(PA8)
#define RFSWITCH_BYPASS(x)			do{																	  \
										GPIO_WriteBit(GPIOB,GPIO_Pin_5 ,FALSE == x ? Bit_RESET:Bit_SET);  \
										GPIO_WriteBit(GPIOA,GPIO_Pin_8 ,FALSE == x ? Bit_RESET:Bit_SET);  \
									}while(0)															  \

#define RFSWITCH_TEST(x) 			do{								  \
										if ( x == TRUE )			  \
										{							  \
											RFSWITCH_PATH1_1(2);	  \
											RFSWITCH_PATH1_2(2);	  \
										}							  \
										else						  \
										{							  \
											RFSWITCH_PATH1_1(1);	  \
											RFSWITCH_PATH1_2(1);	  \
										}							  \
									}while(0)

#define RFSWITCH_PATH(x)			do{								  \
										RFPOWER_5V_1(FALSE);		  \
										RFPOWER_5V_2(FALSE);		  \
										RFPOWER_5V_1(FALSE);		  \
										RFPOWER_9V_2(FALSE);		  \
										RFSWITCH_BYPASS(FALSE);		  \
										if ( x == BYPASS )			  \
										{							  \
											RFSWITCH_BYPASS(TRUE);	  \
										}							  \
										else if ( x == PATH1 )		  \
										{							  \
											RFPOWER_5V_1(TRUE);		  \
											RFPOWER_9V_1(TRUE);		  \
											RFSWITCH_PATH1_1(1);	  \
											RFSWITCH_PATH1_2(2);	  \
											RFSWITCH_PATH2(2);	      \
										}							  \
										else if ( x == PATH2 )		  \
										{							  \
											RFPOWER_5V_2(TRUE);		  \
											RFPOWER_9V_2(TRUE);		  \
											RFSWITCH_PATH1_1(2);	  \
											RFSWITCH_PATH1_2(1);	  \
											RFSWITCH_PATH2(1);	      \
										}							  \
									}while{0}						  
	
#define EEPROM_WP_UNPROTECT()   	//GPIO_WriteBit(GPIOA,GPIO_Pin_1,Bit_SET  )
#define EEPROM_WP_PROTECT()     	//GPIO_WriteBit(GPIOA,GPIO_Pin_1,Bit_RESET)
/* Public macro --------------------------------------------------------------*/
/* Public variables ----------------------------------------------------------*/
extern  const SPI_BUS attBus[];
__TARGET_EXT__ __IO U16 ADCConvertedValue;
/* Public function prototypes ------------------------------------------------*/
void InitTarget(void);
/********************************END OF FILE***********************************/
